import{u as S,r as D,a as ze,j as b}from"./MantineProvider-e0f37d01.js";import{r as c,R as f}from"./index-8db94870.js";import{u as Le,B as Be,l as He,D as Me,k as Ke,p as Ve,b as Ue,T as qe,c as Xe,O as Ye,n as Ze,o as Ge,g as Je,m as Qe}from"./get-floating-position-1fb0795e.js";import{u as We,c as et}from"./use-uncontrolled-665edddf.js";import{u as A}from"./use-did-update-a71ce98f.js";import{i as V}from"./is-element-668ce016.js";import{u as U}from"./use-reduced-motion-a5dba724.js";import{a as tt,B as rt}from"./Box-2e9e8fb7.js";import{c as ot}from"./create-styles-ec211158.js";import{r as nt,u as at}from"./use-id-a180eed7.js";import{B as st}from"./Button-3f16f0eb.js";import{T as it}from"./Text-cbe185d4.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-4abd396b.js";import"./_commonjsHelpers-042e6b4d.js";import"./index-8ce4a492.js";import"./Loader-056beee8.js";import"./UnstyledButton-73f6208e.js";const lt=()=>{};function dt(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||lt:r=>{var o;r.key==="Escape"&&(e(r),(o=t.onTrigger)==null||o.call(t))}}const j=["mousedown","touchstart"];function ct(e,t,r){const o=c.useRef();return c.useEffect(()=>{const a=i=>{const{target:s}=i??{};if(Array.isArray(r)){const l=(s==null?void 0:s.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(s)&&s.tagName!=="HTML";r.every(u=>!!u&&!i.composedPath().includes(u))&&!l&&e()}else o.current&&!o.current.contains(s)&&e()};return(t||j).forEach(i=>document.addEventListener(i,a)),()=>{(t||j).forEach(i=>document.removeEventListener(i,a))}},[o,e,r]),o}function ut({opened:e,shouldReturnFocus:t=!0}){const r=c.useRef(),o=()=>{var a;r.current&&"focus"in r.current&&typeof r.current.focus=="function"&&((a=r.current)==null||a.focus({preventScroll:!0}))};return A(()=>{let a=-1;const i=s=>{s.key==="Tab"&&window.clearTimeout(a)};return document.addEventListener("keydown",i),e?r.current=document.activeElement:t&&(a=window.setTimeout(o,10)),()=>{window.clearTimeout(a),document.removeEventListener("keydown",i)}},[e,t]),o}const pt=/input|select|textarea|button|object/,q="a, input, select, textarea, button, object, [tabindex]";function ft(e){return e.style.display==="none"}function mt(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let r=e;for(;r&&!(r===document.body||r.nodeType===11);){if(ft(r))return!1;r=r.parentNode}return!0}function X(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function R(e){const t=e.nodeName.toLowerCase(),r=!Number.isNaN(X(e));return(pt.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||r)&&mt(e)}function Y(e){const t=X(e);return(Number.isNaN(t)||t>=0)&&R(e)}function wt(e){return Array.from(e.querySelectorAll(q)).filter(Y)}function gt(e,t){const r=wt(e);if(!r.length){t.preventDefault();return}const o=r[t.shiftKey?0:r.length-1],a=e.getRootNode();if(!(o===a.activeElement||e===a.activeElement))return;t.preventDefault();const s=r[t.shiftKey?r.length-1:0];s&&s.focus()}function vt(e,t="body > :not(script)"){const r=nt(),o=Array.from(document.querySelectorAll(t)).map(a=>{var i;if((i=a==null?void 0:a.shadowRoot)!=null&&i.contains(e)||a.contains(e))return;const s=a.getAttribute("aria-hidden"),l=a.getAttribute("data-hidden"),n=a.getAttribute("data-focus-id");return a.setAttribute("data-focus-id",r),s===null||s==="false"?a.setAttribute("aria-hidden","true"):!l&&!n&&a.setAttribute("data-hidden",s),{node:a,ariaHidden:l||null}});return()=>{o.forEach(a=>{!a||r!==a.node.getAttribute("data-focus-id")||(a.ariaHidden===null?a.node.removeAttribute("aria-hidden"):a.node.setAttribute("aria-hidden",a.ariaHidden),a.node.removeAttribute("data-focus-id"),a.node.removeAttribute("data-hidden"))})}}function bt(e=!0){const t=c.useRef(),r=c.useRef(null),o=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const l=Array.from(i.querySelectorAll(q));s=l.find(Y)||l.find(R)||null,!s&&R(i)&&(s=i)}s&&s.focus({preventScroll:!0})},a=c.useCallback(i=>{if(e){if(i===null){r.current&&(r.current(),r.current=null);return}r.current=vt(i),t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&o(i)}),t.current=i):t.current=null)}},[e]);return c.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>o(t.current));const i=s=>{s.key==="Tab"&&t.current&&gt(t.current,s)};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i),r.current&&r.current()}},[e]),a}function ht(e){const t=[Me(e.offset)];return e.middlewares.shift&&t.push(Ke({limiter:Ve()})),e.middlewares.flip&&t.push(Ue()),e.middlewares.inline&&t.push(qe()),t.push(Xe({element:e.arrowRef,padding:e.arrowOffset})),t}function yt(e){const[t,r]=We({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),o=()=>{var s;(s=e.onClose)==null||s.call(e),r(!1)},a=()=>{var s,l;t?((s=e.onClose)==null||s.call(e),r(!1)):((l=e.onOpen)==null||l.call(e),r(!0))},i=Le({placement:e.position,middleware:[...ht(e),...e.width==="target"?[Be({apply({rects:s}){var l,n;Object.assign((n=(l=i.refs.floating.current)==null?void 0:l.style)!=null?n:{},{width:`${s.reference.width}px`})}})]:[]]});return He({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies,floating:i}),A(()=>{var s;(s=e.onPositionChange)==null||s.call(e,i.placement)},[i.placement]),A(()=>{var s,l;e.opened?(l=e.onOpen)==null||l.call(e):(s=e.onClose)==null||s.call(e)},[e.opened]),{floating:i,controlled:typeof e.opened=="boolean",opened:t,onClose:o,onToggle:a}}const Z={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported"},[Pt,G]=et(Z.context);var _t=Object.defineProperty,Ot=Object.defineProperties,Tt=Object.getOwnPropertyDescriptors,T=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,z=(e,t,r)=>t in e?_t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P=(e,t)=>{for(var r in t||(t={}))J.call(t,r)&&z(e,r,t[r]);if(T)for(var r of T(t))Q.call(t,r)&&z(e,r,t[r]);return e},xt=(e,t)=>Ot(e,Tt(t)),Et=(e,t)=>{var r={};for(var o in e)J.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&T)for(var o of T(e))t.indexOf(o)<0&&Q.call(e,o)&&(r[o]=e[o]);return r};const Nt={refProp:"ref",popupType:"dialog"},W=c.forwardRef((e,t)=>{const r=S("PopoverTarget",Nt,e),{children:o,refProp:a,popupType:i}=r,s=Et(r,["children","refProp","popupType"]);if(!V(o))throw new Error(Z.children);const l=s,n=G(),u=U(n.reference,o.ref,t),w=n.withRoles?{"aria-haspopup":i,"aria-expanded":n.opened,"aria-controls":n.getDropdownId(),id:n.getTargetId()}:{};return c.cloneElement(o,P(xt(P(P(P({},l),w),n.targetProps),{className:tt(n.targetProps.className,l.className,o.props.className),[a]:u}),n.controlled?null:{onClick:n.onToggle}))});W.displayName="@mantine/core/PopoverTarget";var Dt=ot((e,{radius:t,shadow:r})=>({dropdown:{position:"absolute",backgroundColor:e.white,background:e.colorScheme==="dark"?e.colors.dark[6]:e.white,border:`${D(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,padding:`${e.spacing.sm} ${e.spacing.md}`,boxShadow:e.shadows[r]||r||"none",borderRadius:e.fn.radius(t),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`${D(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[2]}`,zIndex:1}}));const At=Dt;function ee({children:e,active:t=!0,refProp:r="ref"}){const o=bt(t),a=U(o,e==null?void 0:e.ref);return V(e)?c.cloneElement(e,{[r]:a}):e}ee.displayName="@mantine/core/FocusTrap";var Rt=Object.defineProperty,St=Object.defineProperties,Ct=Object.getOwnPropertyDescriptors,x=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,L=(e,t,r)=>t in e?Rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,p=(e,t)=>{for(var r in t||(t={}))te.call(t,r)&&L(e,r,t[r]);if(x)for(var r of x(t))re.call(t,r)&&L(e,r,t[r]);return e},_=(e,t)=>St(e,Ct(t)),kt=(e,t)=>{var r={};for(var o in e)te.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&x)for(var o of x(e))t.indexOf(o)<0&&re.call(e,o)&&(r[o]=e[o]);return r};const It={};function oe(e){var t;const r=S("PopoverDropdown",It,e),{style:o,className:a,children:i,onKeyDownCapture:s}=r,l=kt(r,["style","className","children","onKeyDownCapture"]),n=G(),{classes:u,cx:w}=At({radius:n.radius,shadow:n.shadow},{name:n.__staticSelector,classNames:n.classNames,styles:n.styles,unstyled:n.unstyled,variant:n.variant}),g=ut({opened:n.opened,shouldReturnFocus:n.returnFocus}),E=n.withRoles?{"aria-labelledby":n.getTargetId(),id:n.getDropdownId(),role:"dialog"}:{};return n.disabled?null:f.createElement(Ye,_(p({},n.portalProps),{withinPortal:n.withinPortal}),f.createElement(Ze,_(p({mounted:n.opened},n.transitionProps),{transition:n.transitionProps.transition||"fade",duration:(t=n.transitionProps.duration)!=null?t:150,keepMounted:n.keepMounted,exitDuration:typeof n.transitionProps.exitDuration=="number"?n.transitionProps.exitDuration:n.transitionProps.duration}),N=>{var h,y;return f.createElement(ee,{active:n.trapFocus},f.createElement(rt,p(_(p({},E),{tabIndex:-1,ref:n.floating,style:_(p(p({},o),N),{zIndex:n.zIndex,top:(h=n.y)!=null?h:0,left:(y=n.x)!=null?y:0,width:n.width==="target"?void 0:D(n.width)}),className:w(u.dropdown,a),onKeyDownCapture:dt(n.onClose,{active:n.closeOnEscape,onTrigger:g,onKeyDown:s}),"data-position":n.placement}),l),i,f.createElement(Ge,{ref:n.arrowRef,arrowX:n.arrowX,arrowY:n.arrowY,visible:n.withArrow,position:n.placement,arrowSize:n.arrowSize,arrowRadius:n.arrowRadius,arrowOffset:n.arrowOffset,arrowPosition:n.arrowPosition,className:u.arrow})))}))}oe.displayName="@mantine/core/PopoverDropdown";var B=Object.getOwnPropertySymbols,Ft=Object.prototype.hasOwnProperty,$t=Object.prototype.propertyIsEnumerable,jt=(e,t)=>{var r={};for(var o in e)Ft.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&B)for(var o of B(e))t.indexOf(o)<0&&$t.call(e,o)&&(r[o]=e[o]);return r};const zt={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Je("popover"),__staticSelector:"Popover",width:"max-content"};function m(e){var t,r,o,a,i,s;const l=c.useRef(null),n=S("Popover",zt,e),{children:u,position:w,offset:g,onPositionChange:E,positionDependencies:N,opened:h,transitionProps:y,width:C,middlewares:ne,withArrow:k,arrowSize:I,arrowOffset:F,arrowRadius:ae,arrowPosition:se,unstyled:ie,classNames:le,styles:de,closeOnClickOutside:ce,withinPortal:ue,portalProps:pe,closeOnEscape:fe,clickOutsideEvents:me,trapFocus:we,onClose:ge,onOpen:ve,onChange:be,zIndex:he,radius:ye,shadow:Pe,id:_e,defaultOpened:Oe,__staticSelector:Te,withRoles:xe,disabled:Ee,returnFocus:Ne,variant:De,keepMounted:Ae}=n,Re=jt(n,["children","position","offset","onPositionChange","positionDependencies","opened","transitionProps","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","unstyled","classNames","styles","closeOnClickOutside","withinPortal","portalProps","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","__staticSelector","withRoles","disabled","returnFocus","variant","keepMounted"]),[Se,Ce]=c.useState(null),[ke,Ie]=c.useState(null),$=at(_e),Fe=ze(),d=yt({middlewares:ne,width:C,position:Qe(Fe.dir,w),offset:typeof g=="number"?g+(k?I/2:0):g,arrowRef:l,arrowOffset:F,onPositionChange:E,positionDependencies:N,opened:h,defaultOpened:Oe,onChange:be,onOpen:ve,onClose:ge});ct(()=>d.opened&&ce&&d.onClose(),me,[Se,ke]);const $e=c.useCallback(v=>{Ce(v),d.floating.reference(v)},[d.floating.reference]),je=c.useCallback(v=>{Ie(v),d.floating.floating(v)},[d.floating.floating]);return f.createElement(Pt,{value:{returnFocus:Ne,disabled:Ee,controlled:d.controlled,reference:$e,floating:je,x:d.floating.x,y:d.floating.y,arrowX:(o=(r=(t=d.floating)==null?void 0:t.middlewareData)==null?void 0:r.arrow)==null?void 0:o.x,arrowY:(s=(i=(a=d.floating)==null?void 0:a.middlewareData)==null?void 0:i.arrow)==null?void 0:s.y,opened:d.opened,arrowRef:l,transitionProps:y,width:C,withArrow:k,arrowSize:I,arrowOffset:F,arrowRadius:ae,arrowPosition:se,placement:d.floating.placement,trapFocus:we,withinPortal:ue,portalProps:pe,zIndex:he,radius:ye,shadow:Pe,closeOnEscape:fe,onClose:d.onClose,onToggle:d.onToggle,getTargetId:()=>`${$}-target`,getDropdownId:()=>`${$}-dropdown`,withRoles:xe,targetProps:Re,__staticSelector:Te,classNames:le,styles:de,unstyled:ie,variant:De,keepMounted:Ae}},u)}m.Target=W;m.Dropdown=oe;m.displayName="@mantine/core/Popover";const rr={title:"Components/Popover",parameters:{layout:"centered"}},O={render:e=>b.jsxs(m,{...e,children:[b.jsx(m.Target,{children:b.jsx(st,{children:"Toggle popover"})}),b.jsx(m.Dropdown,{children:b.jsx(it,{size:"sm",children:"This is uncontrolled popover, it is opened when button is clicked"})})]}),args:{width:200,position:"bottom",withArrow:!0,shadow:"md"},argTypes:{width:{type:"number"},position:{control:{type:"select"},options:["bottom","top","left","right","bottom-start","bottom-end","top-start","top-end","left-start","left-end","right-start","right-end"]},shadow:{control:{type:"select"},options:["xs","sm","md","lg","xl"]},withArrow:{type:"boolean"},arrowSize:{type:"number"},offset:{type:"number"},trapFocus:{type:"boolean"}}};var H,M,K;O.parameters={...O.parameters,docs:{...(H=O.parameters)==null?void 0:H.docs,source:{originalSource:`{
  render: args => <Popover {...args}>
      <Popover.Target>
        <Button>Toggle popover</Button>
      </Popover.Target>

      <Popover.Dropdown>
        <Text size="sm">
          This is uncontrolled popover, it is opened when button is clicked
        </Text>
      </Popover.Dropdown>
    </Popover>,
  args: {
    width: 200,
    position: 'bottom',
    withArrow: true,
    shadow: 'md'
  },
  argTypes: {
    width: {
      type: 'number'
    },
    position: {
      control: {
        type: 'select'
      },
      options: ['bottom', 'top', 'left', 'right', 'bottom-start', 'bottom-end', 'top-start', 'top-end', 'left-start', 'left-end', 'right-start', 'right-end']
    },
    shadow: {
      control: {
        type: 'select'
      },
      options: ['xs', 'sm', 'md', 'lg', 'xl']
    },
    withArrow: {
      type: 'boolean'
    },
    arrowSize: {
      type: 'number'
    },
    offset: {
      type: 'number'
    },
    trapFocus: {
      type: 'boolean'
    }
  }
}`,...(K=(M=O.parameters)==null?void 0:M.docs)==null?void 0:K.source}}};const or=["Default"];export{O as Default,or as __namedExportsOrder,rr as default};
//# sourceMappingURL=Popover.stories-aab6ddf0.js.map
